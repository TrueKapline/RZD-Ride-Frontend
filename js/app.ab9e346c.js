(function(){"use strict";var t={3582:function(t,a,i){var r=i(9242),n=i(3396);function s(t,a,i,r,s,e){const o=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)(o)}var e={},o=i(89);const l=(0,o.Z)(e,[["render",s]]);var c=l,d=i(2483),u=i(7139);const h=t=>((0,n.dD)("data-v-22db4239"),t=t(),(0,n.Cn)(),t),p={class:"status window"},S={class:"lower-part"},v={class:"time-table window"},w={key:0},f=h((()=>(0,n._)("div",{class:"map window"},null,-1))),_=h((()=>(0,n._)("div",{class:"interesting window"},null,-1)));function m(t,a,i,r,s,e){const o=(0,n.up)("Stations"),l=(0,n.up)("Weather");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",p,[(0,n.Wm)(o,{status:this.status},null,8,["status"]),(0,n.Wm)(l,{time:this.time},null,8,["time"])]),(0,n._)("div",S,[(0,n._)("div",v,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.arrStop,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.duration},[(0,n.Uk)((0,u.zw)(t.arrivalShow)+" ",1),t.arrivalShow&&t.departureShow?((0,n.wg)(),(0,n.iD)("span",w,"-")):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,u.zw)(t.departureShow)+" "+(0,u.zw)(t.title),1)])))),128))]),f,_])],64)}var g=i(70),b=i.p+"img/sun-icon.bb07a1b0.svg";const y=t=>((0,n.dD)("data-v-b1287658"),t=t(),(0,n.Cn)(),t),E={class:"time-and-weather"},k={class:"time"},D=y((()=>(0,n._)("div",{class:"weather"},[(0,n._)("img",{src:b,alt:"",class:"weather-icon"}),(0,n._)("span",{class:"weather-text"},"Ясно, 15°С")],-1)));function R(t,a,i,r,s,e){return(0,n.wg)(),(0,n.iD)("div",E,[(0,n._)("h1",k,(0,u.zw)(i.time),1),D])}var A={name:"Weather",props:{time:{type:String}},data(){return{}}};const j=(0,o.Z)(A,[["render",R],["__scopeId","data-v-b1287658"]]);var x=j;const z=t=>((0,n.dD)("data-v-040aac24"),t=t(),(0,n.Cn)(),t),C={class:"station-info"},O={class:"status-title"},U=z((()=>(0,n._)("span",{class:"status-info"},"Следующая остановка – Горка",-1)));function Z(t,a,i,r,s,e){return(0,n.wg)(),(0,n.iD)("div",C,[(0,n._)("h1",O,(0,u.zw)(i.status),1),U])}var L={name:"Status",props:{status:{type:String}}};const H=(0,o.Z)(L,[["render",Z],["__scopeId","data-v-040aac24"]]);var P=H,I={components:{Stations:P,Weather:x},data(){return{baseURL:"http://mypew.ru:3001/route_data/",arrStop:[],interval:null,count:0,time:"",status:""}},methods:{async loadTrip(){try{let t=(new Date).toLocaleString(),a=t.slice(6,10)+"-"+t.slice(3,5)+"-"+t.slice(0,2)+" "+t.slice(12,20);this.time=t.slice(12,20);const i=await g.ZP.get(this.baseURL+this.$route.params.uid);this.arrStop=i.data.stops,this.arrStop[0].departure>a&&(this.status="Поезд ещё не выехал"),this.arrStop[this.arrStop.length-1].arrival<a&&(this.status="Поезд уже закончил свой маршрут"),console.log(this.arrStop),this.arrStop.forEach((t=>{t.arrival&&(t.arrivalShow=t.arrival.slice(11,16)),t.departure&&(t.departureShow=t.departure.slice(11,16))})),this.interval=setInterval((()=>{t=(new Date).toLocaleString(),a=t.slice(6,10)+"-"+t.slice(3,5)+"-"+t.slice(0,2)+" "+t.slice(12,20),this.time=t.slice(12,20),this.arrStop.forEach(((t,i)=>{t.departure>a&&t.arrival<a?this.status="Стоянка на станции "+t.title:this.arrStop.length}))}),1e3)}catch(t){alert("Error: "+t)}}},created(){this.loadTrip()}};const W=(0,o.Z)(I,[["render",m],["__scopeId","data-v-22db4239"]]);var Y=W,K=(i(7658),i.p+"img/arrow-large.54d7057a.svg");const T=t=>((0,n.dD)("data-v-6499f0d7"),t=t(),(0,n.Cn)(),t),F={class:"window search"},V=T((()=>(0,n._)("h1",{class:"header"},"Расписание электричек",-1))),$={class:"form"},q={class:"from"},M=T((()=>(0,n._)("label",{for:"from",class:"from__label"},"Откуда",-1))),B=T((()=>(0,n._)("img",{src:K,alt:"",draggable:"false"},null,-1))),G={class:"to"},J=T((()=>(0,n._)("label",{for:"to",class:"to__label"},"Куда",-1))),N=T((()=>(0,n._)("input",{type:"date",id:"date",class:"date"},null,-1))),Q=T((()=>(0,n._)("div",{class:"headings"},[(0,n._)("p",null,"Отпр."),(0,n._)("p",null,"Приб."),(0,n._)("p",null,"В пути"),(0,n._)("p",null,"Маршрут")],-1))),X=T((()=>(0,n._)("hr",null,null,-1))),tt={class:"wrapper"},at=["value","onClick"],it={class:"parameters"},rt={class:"parameter"},nt={class:"parameter"},st=T((()=>(0,n._)("span",{class:"parameter"},"1 ч 23 м",-1))),et={class:"parameter"},ot=T((()=>(0,n._)("hr",null,null,-1)));function lt(t,a,i,s,e,o){return(0,n.wg)(),(0,n.iD)("main",{style:(0,u.j5)(e.isResultHidden?"justify-content: center":"")},[(0,n._)("div",F,[V,(0,n._)("div",$,[(0,n._)("div",q,[(0,n.wy)((0,n._)("input",{type:"text",id:"from",class:"from__input",placeholder:" ",onClick:a[0]||(a[0]=t=>o.clickStartStation()),"onUpdate:modelValue":a[1]||(a[1]=t=>e.startStation=t),style:(0,u.j5)(e.isAvailStart?"border-radius: 10px 10px 0 0":"border-radius: 10px")},null,4),[[r.nr,e.startStation]]),M,(0,n._)("div",{class:"search-results",style:(0,u.j5)(e.isAvailStart?"display: block":"display: none")},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.arrStartStation,(t=>((0,n.wg)(),(0,n.iD)("button",{class:"element-button",key:t.station_name},(0,u.zw)(t.station_name),1)))),128))],4)]),B,(0,n._)("div",G,[(0,n.wy)((0,n._)("input",{type:"text",id:"to",class:"to__input",placeholder:" ",onClick:a[2]||(a[2]=t=>o.clickEndStation()),"onUpdate:modelValue":a[3]||(a[3]=t=>e.endStation=t),style:(0,u.j5)(e.isAvailEnd?"border-radius: 10px 10px 0 0":"border-radius: 10px")},null,4),[[r.nr,e.endStation]]),J,(0,n._)("div",{class:"search-results",style:(0,u.j5)(e.isAvailEnd?"display: block":"display: none")},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.arrEndStation,(t=>((0,n.wg)(),(0,n.iD)("button",{class:"element-button",key:t.station_name},(0,u.zw)(t.station_name),1)))),128))],4)]),N,(0,n._)("button",{class:"search-button",onClick:a[4]||(a[4]=t=>o.getStation())},"Найти маршруты")])]),(0,n._)("div",{class:"window results",style:(0,u.j5)(e.isResultHidden?"display: none":"")},[Q,X,(0,n._)("div",tt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.arrRoute,(a=>((0,n.wg)(),(0,n.iD)("div",{class:"results-list",key:a.uid,value:a.uid,onClick:i=>{t.$router.push("/trip/"+a.uid)}},[(0,n._)("div",it,[(0,n._)("span",rt,(0,u.zw)(a.depShow),1),(0,n._)("span",nt,(0,u.zw)(a.arrShow),1),st,(0,n._)("span",et,(0,u.zw)(a.title),1)]),ot],8,at)))),128))])],4)],4)}var ct={data(){return{startStation:"",endStation:"",baseURL:"http://mypew.ru:3001/routes_suburbans_station_from_to/",findURL:"http://mypew.ru:3001/possible_station_names/",arrRoute:[],arrStartStation:[],isAvailStart:!1,arrEndStation:[],isAvailEnd:!1,isResultHidden:!0}},methods:{async changeStartStation(){if(this.startStation=this.startStation.trimStart(),""!=this.startStation)try{const t=await g.ZP.get(this.findURL+this.startStation);this.arrStartStation=t.data,0!==this.arrStartStation.length?this.isAvailStart=!0:this.isAvailStart=!1}catch(t){alert("Error: "+t)}else this.isAvailStart=!1,this.arrStartStation=[]},async changeEndStation(){if(this.endStation=this.endStation.trimStart(),""!=this.endStation)try{const t=await g.ZP.get(this.findURL+this.endStation);this.arrEndStation=t.data,0!==this.arrEndStation.length?this.isAvailEnd=!0:this.isAvailEnd=!1}catch(t){alert("Error: "+t)}else this.isAvailEnd=!1,this.arrEndStation=[]},clickStartStation(){this.arrEndStation=[],this.isAvailEnd=!1,this.changeStartStation()},clickEndStation(){this.arrStartStation=[],this.isAvailStart=!1,this.changeEndStation()},async getStation(){let t=(new Date).toLocaleString(),a=t.slice(6,10)+"-"+t.slice(3,5)+"-"+t.slice(0,2);if(this.arrStartStation=[],this.isAvailEnd=!1,this.arrEndStation=[],this.isAvailStart=!1,this.isResultHidden=!1,""!=this.startStation||""!=this.endStation)try{const t=await g.ZP.get(this.baseURL+this.startStation+"/"+this.endStation+"/"+a);this.arrRoute=t.data,console.log(this.arrRoute),this.arrRoute.map((t=>{t.depShow=t.dep.slice(11,16),t.arrShow=t.arr.slice(11,16)}))}catch(i){alert("Error: "+i)}}},watch:{startStation:function(){this.changeStartStation()},endStation:function(){this.changeEndStation()}}};const dt=(0,o.Z)(ct,[["render",lt],["__scopeId","data-v-6499f0d7"]]);var ut=dt;const ht=[{path:"/trip/:uid",component:Y},{path:"/",component:ut}],pt=(0,d.p7)({routes:ht,history:(0,d.r5)("/RZD-Ride-Frontend/")});var St=pt;(0,r.ri)(c).use(St).mount("#app")}},a={};function i(r){var n=a[r];if(void 0!==n)return n.exports;var s=a[r]={exports:{}};return t[r](s,s.exports,i),s.exports}i.m=t,function(){var t=[];i.O=function(a,r,n,s){if(!r){var e=1/0;for(d=0;d<t.length;d++){r=t[d][0],n=t[d][1],s=t[d][2];for(var o=!0,l=0;l<r.length;l++)(!1&s||e>=s)&&Object.keys(i.O).every((function(t){return i.O[t](r[l])}))?r.splice(l--,1):(o=!1,s<e&&(e=s));if(o){t.splice(d--,1);var c=n();void 0!==c&&(a=c)}}return a}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[r,n,s]}}(),function(){i.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(a,{a:a}),a}}(),function(){i.d=function(t,a){for(var r in a)i.o(a,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:a[r]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}(),function(){i.p="/RZD-Ride-Frontend/"}(),function(){var t={143:0};i.O.j=function(a){return 0===t[a]};var a=function(a,r){var n,s,e=r[0],o=r[1],l=r[2],c=0;if(e.some((function(a){return 0!==t[a]}))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(l)var d=l(i)}for(a&&a(r);c<e.length;c++)s=e[c],i.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return i.O(d)},r=self["webpackChunkrzd_ride_frontend"]=self["webpackChunkrzd_ride_frontend"]||[];r.forEach(a.bind(null,0)),r.push=a.bind(null,r.push.bind(r))}();var r=i.O(void 0,[998],(function(){return i(3582)}));r=i.O(r)})();
//# sourceMappingURL=app.ab9e346c.js.map