(function(){"use strict";var t={5603:function(t,i,r){var a=r(9242),n=r(3396);function e(t,i,r,a,e,o){const s=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)(s)}var o={},s=r(89);const l=(0,s.Z)(o,[["render",e]]);var d=l,u=r(2483),c=r(7139);const h={class:"status window"},p={class:"lower-part"},v={class:"time-table window"},w={key:0},S=(0,n._)("div",{class:"map window"},null,-1),f=(0,n._)("div",{class:"interesting window"},null,-1);function g(t,i,r,a,e,o){const s=(0,n.up)("Stations"),l=(0,n.up)("Weather");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",h,[(0,n.Wm)(s,{status:this.status},null,8,["status"]),(0,n.Wm)(l,{time:this.time},null,8,["time"])]),(0,n._)("div",p,[(0,n._)("div",v,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.arrStop,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.duration},[(0,n.Uk)((0,c.zw)(t.arrivalShow)+" ",1),t.arrivalShow&&t.departureShow?((0,n.wg)(),(0,n.iD)("span",w,"-")):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,c.zw)(t.departureShow)+" "+(0,c.zw)(t.title),1)])))),128))]),S,f])],64)}var m=r(70),b=r.p+"img/sun-icon.46b9915d.svg";const y=t=>((0,n.dD)("data-v-b1287658"),t=t(),(0,n.Cn)(),t),_={class:"time-and-weather"},k={class:"time"},x=y((()=>(0,n._)("div",{class:"weather"},[(0,n._)("img",{src:b,alt:"",class:"weather-icon"}),(0,n._)("span",{class:"weather-text"},"Ясно, 15°С")],-1)));function E(t,i,r,a,e,o){return(0,n.wg)(),(0,n.iD)("div",_,[(0,n._)("h1",k,(0,c.zw)(r.time),1),x])}var D={name:"Weather",props:{time:{type:String}},data(){return{}}};const z=(0,s.Z)(D,[["render",E],["__scopeId","data-v-b1287658"]]);var R=z;const A=t=>((0,n.dD)("data-v-040aac24"),t=t(),(0,n.Cn)(),t),O={class:"station-info"},U={class:"status-title"},Z=A((()=>(0,n._)("span",{class:"status-info"},"Следующая остановка – Горка",-1)));function j(t,i,r,a,e,o){return(0,n.wg)(),(0,n.iD)("div",O,[(0,n._)("h1",U,(0,c.zw)(r.status),1),Z])}var L={name:"Status",props:{status:{type:String}}};const C=(0,s.Z)(L,[["render",j],["__scopeId","data-v-040aac24"]]);var P=C,H={components:{Stations:P,Weather:R},data(){return{baseURL:"http://mypew.ru:3001/route_data/",arrStop:[],interval:null,count:0,time:"",status:""}},methods:{async loadTrip(){try{let t=(new Date).toLocaleString(),i=t.slice(6,10)+"-"+t.slice(3,5)+"-"+t.slice(0,2)+" "+t.slice(12,20);this.time=t.slice(12,20);const r=await m.ZP.get(this.baseURL+this.$route.params.uid);this.arrStop=r.data.stops,this.arrStop[0].departure>i&&(this.status="Поезд ещё не выехал"),this.arrStop[this.arrStop.length-1].arrival<i&&(this.status="Поезд уже закончил свой маршрут"),console.log(this.arrStop),this.arrStop.forEach((t=>{t.arrival&&(t.arrivalShow=t.arrival.slice(11,16)),t.departure&&(t.departureShow=t.departure.slice(11,16))})),this.interval=setInterval((()=>{t=(new Date).toLocaleString(),i=t.slice(6,10)+"-"+t.slice(3,5)+"-"+t.slice(0,2)+" "+t.slice(12,20),this.time=t.slice(12,20),this.arrStop.forEach(((t,r)=>{t.departure>i&&t.arrival<i?this.status="Стоянка на станции "+t.title:this.arrStop.length}))}),1e3)}catch(t){alert("Error: "+t)}}},created(){this.loadTrip()}};const W=(0,s.Z)(H,[["render",g]]);var Y=W;r(7658);const K={style:{margin:"auto",width:"max-content",height:"100vh"}},T=(0,n._)("h1",{style:{"margin-bottom":"1vw"}},"Это главная страница для выбора маршрута",-1),F={style:{display:"flex"}},I={style:{position:"absolute",width:"100%","background-color":"white","border-radius":"0 0 16px 16px"}},V={style:{position:"absolute",width:"100%","background-color":"white","border-radius":"0 0 16px 16px"}},$=["onClick","value"],q={style:{width:"50%"}};function M(t,i,r,e,o,s){return(0,n.wg)(),(0,n.iD)("div",K,[T,(0,n._)("div",F,[(0,n._)("div",{style:(0,c.j5)([{"margin-right":"2vw","background-color":"white","border-radius":"16px",position:"relative"},o.isAvailStart?"border-radius: 16px 16px 0 0":""])},[(0,n.wy)((0,n._)("input",{onClick:i[0]||(i[0]=t=>s.clickStartStation()),"onUpdate:modelValue":i[1]||(i[1]=t=>o.startStation=t),style:{padding:"0.5vw","font-size":"16px","border-radius":"16px"}},null,512),[[a.nr,o.startStation]]),(0,n._)("div",I,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.arrStartStation,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.station_name,style:{"background-color":"white",padding:"0.5vw","font-size":"16px","border-radius":"16px"}},(0,c.zw)(t.station_name),1)))),128))])],4),(0,n._)("div",{style:(0,c.j5)([{"margin-right":"2vw","background-color":"white","border-radius":"16px",position:"relative"},o.isAvailEnd?"border-radius: 16px 16px 0 0":""])},[(0,n.wy)((0,n._)("input",{onClick:i[2]||(i[2]=t=>s.clickEndStation()),"onUpdate:modelValue":i[3]||(i[3]=t=>o.endStation=t),style:{padding:"0.5vw","font-size":"16px","border-radius":"16px"}},null,512),[[a.nr,o.endStation]]),(0,n._)("div",V,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.arrEndStation,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.station_name,style:{"background-color":"white",padding:"0.5vw","font-size":"16px","border-radius":"16px"}},(0,c.zw)(t.station_name),1)))),128))])],4),(0,n._)("div",null,[(0,n._)("button",{onClick:i[4]||(i[4]=t=>s.getStation()),style:{"margin-right":"2vw",padding:"0.5vw","font-size":"16px","border-radius":"16px",cursor:"pointer"}},"Найти маршруты")])]),(0,n._)("div",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.arrRoute,(i=>((0,n.wg)(),(0,n.iD)("div",{onClick:r=>{t.$router.push("/trip/"+i.uid)},key:i.uid,value:i.uid,style:{padding:"1vw","background-color":"white",margin:"1vw 0","border-radius":"12px",cursor:"pointer",display:"flex","justify-content":"space-between"}},[(0,n._)("span",q,(0,c.zw)(i.title),1),(0,n._)("span",null,(0,c.zw)(i.depShow),1),(0,n._)("span",null,(0,c.zw)(i.arrShow),1)],8,$)))),128))])])}var B={data(){return{startStation:"",endStation:"",baseURL:"http://mypew.ru:3001/routes_suburbans_station_from_to/",findURL:"http://mypew.ru:3001/possible_station_names/",arrRoute:[],arrStartStation:[],isAvailStart:!1,arrEndStation:[],isAvailEnd:!1}},methods:{async changeStartStation(){if(this.startStation=this.startStation.trimStart(),""!=this.startStation)try{const t=await m.ZP.get(this.findURL+this.startStation);this.arrStartStation=t.data,this.isAvailStart=!0}catch(t){alert("Error: "+t)}else this.isAvailStart=!1,this.arrStartStation=[]},async changeEndStation(){if(this.endStation=this.endStation.trimStart(),""!=this.endStation)try{const t=await m.ZP.get(this.findURL+this.endStation);this.arrEndStation=t.data,this.isAvailEnd=!0}catch(t){alert("Error: "+t)}else this.isAvailEnd=!1,this.arrEndStation=[]},clickStartStation(){this.arrEndStation=[],this.isAvailEnd=!1,this.changeStartStation()},clickEndStation(){this.arrStartStation=[],this.isAvailStart=!1,this.changeEndStation()},async getStation(){let t=(new Date).toLocaleString(),i=t.slice(6,10)+"-"+t.slice(3,5)+"-"+t.slice(0,2);if(this.arrStartStation=[],this.isAvailEnd=!1,this.arrEndStation=[],this.isAvailStart=!1,""!=this.startStation||""!=this.endStation)try{const t=await m.ZP.get(this.baseURL+this.startStation+"/"+this.endStation+"/"+i);this.arrRoute=t.data,console.log(this.arrRoute),this.arrRoute.map((t=>{t.depShow=t.dep.slice(11,16),t.arrShow=t.arr.slice(11,16)}))}catch(r){alert("Error: "+r)}}},watch:{startStation:function(){this.changeStartStation()},endStation:function(){this.changeEndStation()}}};const G=(0,s.Z)(B,[["render",M]]);var J=G;const N=[{path:"/trip/:uid",component:Y},{path:"/",component:J}],Q=(0,u.p7)({routes:N,history:(0,u.r5)("/RZD-Ride-Frontend/")});var X=Q;(0,a.ri)(d).use(X).mount("#app")}},i={};function r(a){var n=i[a];if(void 0!==n)return n.exports;var e=i[a]={exports:{}};return t[a](e,e.exports,r),e.exports}r.m=t,function(){var t=[];r.O=function(i,a,n,e){if(!a){var o=1/0;for(u=0;u<t.length;u++){a=t[u][0],n=t[u][1],e=t[u][2];for(var s=!0,l=0;l<a.length;l++)(!1&e||o>=e)&&Object.keys(r.O).every((function(t){return r.O[t](a[l])}))?a.splice(l--,1):(s=!1,e<o&&(o=e));if(s){t.splice(u--,1);var d=n();void 0!==d&&(i=d)}}return i}e=e||0;for(var u=t.length;u>0&&t[u-1][2]>e;u--)t[u]=t[u-1];t[u]=[a,n,e]}}(),function(){r.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(i,{a:i}),i}}(),function(){r.d=function(t,i){for(var a in i)r.o(i,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:i[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)}}(),function(){r.p="/RZD-Ride-Frontend/"}(),function(){var t={143:0};r.O.j=function(i){return 0===t[i]};var i=function(i,a){var n,e,o=a[0],s=a[1],l=a[2],d=0;if(o.some((function(i){return 0!==t[i]}))){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(l)var u=l(r)}for(i&&i(a);d<o.length;d++)e=o[d],r.o(t,e)&&t[e]&&t[e][0](),t[e]=0;return r.O(u)},a=self["webpackChunkrzd_ride_frontend"]=self["webpackChunkrzd_ride_frontend"]||[];a.forEach(i.bind(null,0)),a.push=i.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(5603)}));a=r.O(a)})();
//# sourceMappingURL=app.461dfc6e.js.map